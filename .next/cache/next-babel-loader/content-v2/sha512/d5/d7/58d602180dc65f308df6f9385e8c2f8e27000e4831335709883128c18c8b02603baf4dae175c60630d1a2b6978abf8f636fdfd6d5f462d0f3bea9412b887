{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/yathartharora/Blog/pages/newBlog.js\";\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { Component } from 'react';\nimport blog from '../Ethereum/blog';\nimport Layout from '../Components/Layout';\nimport { Form, Button, Input } from 'semantic-ui-react';\nimport ipfs from '../ipfs';\nimport { Eth } from 'web3/types';\nimport web3 from '../Ethereum/web3';\n\nclass NewBlog extends Component {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"state\", {\n      ipfsHash: '',\n      loading: false,\n      name: ''\n    });\n\n    _defineProperty(this, \"onsubmit\", async event => {\n      event.preventDefault();\n      this.setState({\n        loading: true\n      });\n\n      try {\n        const accounts = await web3.eth.getAccounts();\n        console.log(accounts[0]);\n        await blog.method.Upload(this.state.name, this.state.ipfsHash).send({\n          from: accounts[0],\n          gas: '1000000'\n        });\n      } catch (error) {}\n    });\n  }\n\n  generate(event) {\n    event.preventDefault();\n    ipfs.files.add(this.state.buffer, (err, res) => {\n      if (err) {\n        console.log(err);\n        return;\n      }\n\n      this.setState({\n        ipfsHash: res[0].hash\n      });\n      console.log('ipfsHash: ', this.state.ipfsHash);\n    });\n    this.setState({\n      active: false\n    });\n  }\n\n  captureFile(event) {\n    event.preventDefault();\n    console.log('Capture File...');\n    const file = event.target.files[0];\n    const reader = new window.FileReader();\n    reader.readAsArrayBuffer(file);\n\n    reader.onloadend = () => {\n      this.setState({\n        buffer: Buffer(reader.result)\n      });\n      console.log('buffer ', this.state.buffer);\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(Layout, {\n      children: /*#__PURE__*/_jsxDEV(Form, {\n        onSubmit: this.onsubmit,\n        children: [/*#__PURE__*/_jsxDEV(Form.Field, {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \" Name\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 67,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Input, {\n            value: this.state.firstname,\n            onChange: event => this.setState({\n              firstname: event.target.value\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 68,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Upload File\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Input, {\n            type: \"file\",\n            onChange: this.captureFile\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          secondary: true,\n          loading: this.state.loading,\n          children: \"Submit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          primary: true,\n          onClick: this.generate,\n          children: \"Generate\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default NewBlog;","map":{"version":3,"sources":["/Users/yathartharora/Blog/pages/newBlog.js"],"names":["React","Component","blog","Layout","Form","Button","Input","ipfs","Eth","web3","NewBlog","ipfsHash","loading","name","event","preventDefault","setState","accounts","eth","getAccounts","console","log","method","Upload","state","send","from","gas","error","generate","files","add","buffer","err","res","hash","active","captureFile","file","target","reader","window","FileReader","readAsArrayBuffer","onloadend","Buffer","result","render","onsubmit","firstname","value"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport blog from '../Ethereum/blog';\nimport Layout from '../Components/Layout';\nimport {Form, Button, Input} from 'semantic-ui-react';\nimport ipfs from '../ipfs';\nimport { Eth } from 'web3/types';\nimport web3 from '../Ethereum/web3';\n\nclass NewBlog extends Component{\n\n\n    state={\n        ipfsHash: '',\n        loading: false,\n        name: ''\n    }\n\n    onsubmit = async(event) => {\n        event.preventDefault();\n        this.setState({loading: true});\n        try {\n            const accounts = await web3.eth.getAccounts();\n            console.log(accounts[0]);\n            await blog.method.Upload(this.state.name,this.state.ipfsHash).send({\n                from: accounts[0],\n                gas: '1000000'\n            })\n        } catch (error) {\n            \n        }\n    }\n\n\n    generate(event) {\n        event.preventDefault();\n        ipfs.files.add(this.state.buffer, (err, res) => {\n            if(err){\n                console.log(err)\n                return\n            }\n            this.setState({ipfsHash: res[0].hash})\n            console.log('ipfsHash: ', this.state.ipfsHash);\n        })\n        this.setState({active: false});\n    }\n\n    captureFile(event) {\n        event.preventDefault();\n        console.log('Capture File...')\n\n        const file = event.target.files[0];\n        const reader = new window.FileReader();\n        reader.readAsArrayBuffer(file);\n\n        reader.onloadend = () => {\n            this.setState({buffer: Buffer(reader.result)})\n            console.log('buffer ',this.state.buffer);\n        }\n    }\n\n\n    render(){\n        return(\n            <Layout>\n                <Form onSubmit={this.onsubmit}>\n                    <Form.Field>\n                        <label> Name</label>\n                        <Input \n                         value = {this.state.firstname}\n                         onChange = {event => this.setState({firstname: event.target.value})}\n                        />\n\n                        <label>Upload File</label>\n                        <Input \n                            type='file'\n                            onChange = {this.captureFile}\n                        />\n                    </Form.Field>\n                    <Button secondary loading={this.state.loading}>Submit</Button> \n                    <Button primary onClick={this.generate}>Generate</Button> \n                </Form>\n            </Layout>\n        )\n    }\n}\n\nexport default NewBlog;"]},"metadata":{},"sourceType":"module"}